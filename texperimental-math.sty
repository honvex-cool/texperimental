\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{texperimental-math}

\let\lll\relax
\RequirePackage[inline]{enumitem}
\RequirePackage{hyperref}
\RequirePackage{xcolor}
\RequirePackage{tikz}

\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amsthm}
\RequirePackage{centernot}
\RequirePackage{mathtools}
\RequirePackage{bbm}
\RequirePackage{siunitx}

\RequirePackage[makeroom]{cancel}
\RequirePackage{textcomp}
\RequirePackage{gensymb}
\RequirePackage{amssymb}
\RequirePackage{marvosym}
\RequirePackage{wasysym}

\RequirePackage{xparse}

\RequirePackage{ifthen}

% math
\let\constfont\mathrm

% delimiters
\DeclarePairedDelimiter{\parenthesesdelimiter}{(}{)}
\def\parentheses{\parenthesesdelimiter*}
\let\paren\parentheses
\let\parens\parentheses
\let\pars\parentheses
\let\prs\parentheses
\let\ps\parentheses
\DeclarePairedDelimiter{\bracketsdelimiter}{[}{]}
\def\brackets{\bracketsdelimiter*}
\DeclarePairedDelimiter{\bracesdelimiter}{\{}{\}}
\def\braces{\bracesdelimiter*}
\DeclarePairedDelimiter{\absdelimiter}{|}{|}
\def\abs{\absdelimiter*}
\DeclarePairedDelimiter{\floordelimiter}{\lfloor}{\rfloor}
\def\floor{\floordelimiter*}
\DeclarePairedDelimiter{\ceildelimiter}{\lceil}{\rceil}
\def\ceil{\ceildelimiter*}
\def\fractional{\braces}

% logic
\newcommand{\verticaliff}{\Big\Updownarrow}

% symbols for sets
\let\naturalmusic\natural
\newcommand{\real}{\mathbb{R}}
\renewcommand{\natural}{\mathbb{N}}
\newcommand{\integer}{\mathbb{Z}}
\newcommand{\rational}{\mathbb{Q}}
\newcommand{\irrational}{\real \setminus \rational}
\newcommand{\complex}{\mathbb{C}}
\newcommand{\quaternions}{\mathbb{H}}
\newcommand{\primes}{\mathbb{P}}
\newcommand{\booleans}{\mathbb{B}}
\newcommand{\powerset}{\mathcal{P}}
\let\set\braces
\let\card\#
\let\cardinality\abs
\let\divides\mid
\newcommand{\symmetricgroup}{\mathfrak{S}}
\newcommand{\ndivides}{\centernot\mid}
\renewcommand{\emptyset}{\varnothing}
\newcommand{\id}{\constfont{id}}
\DeclarePairedDelimiter{\anglebracketsdelimiter}{<}{>}
\def\anglebrackets{\anglebracketsdelimiter*}
\let\angs\anglebrackets
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\characteristic}{char}

% complex numbers
\let\Re\relax
\DeclareMathOperator{\Re}{Re}
\let\Im\relax
\DeclareMathOperator{\Im}{Im}
\DeclareMathOperator{\Arg}{Arg}
\let\conj\overline

% intervals
\newcommand{\intervalbounds}[2]{{#1};\,{#2}}
\newcommand{\closed}[2]{\left[\intervalbounds{#1}{#2}\right]}
\newcommand{\leftclosed}[2]{\left[\intervalbounds{#1}{#2}\right)}
\newcommand{\rightclosed}[2]{\left(\intervalbounds{#1}{#2}\right]}
\newcommand{\open}[2]{\left(\intervalbounds{#1}{#2}\right)}
\DeclareMathOperator{\sgn}{sgn}

% sequences
\let\sequence\parentheses
\let\seq\parentheses
\let\ibinom\binom
\renewcommand{\binom}{\dbinom}
\let\nlor\lor
\newcommand{\wlor}{\quad\lor\quad}
\newcommand{\wwlor}{\qquad\lor\qquad}
\let\nland\land
\newcommand{\wland}{\quad\land\quad}
\newcommand{\wwland}{\qquad\land\qquad}
\newcommand{\lxor}{\veebar}
\let\nlxor\lxor
\newcommand{\wlxor}{\quad\lxor\quad}
\newcommand{\wwlxor}{\qquad\lxor\qquad}
\NewDocumentCommand{\limit}{O{n \to +\infty}}{\lim\limits_{#1}}
\NewDocumentCommand{\summation}{O{n = 1} O{+\infty}}{\sum_{#1}^{#2}}
\NewDocumentCommand{\product}{O{k = 1} O{n}}{\prod_{#1}^{#2}}
\let\indeterminate\brackets
\let\series\summation

\NewDocumentCommand{\converges}{s O{orange} m m}
{%
    \IfBooleanTF#1%
    {\underset{\textcolor{#2}{\to #3}}{#4}}%
    {\overset{\textcolor{#2}{\to #3}}{#4}}%
}%
\NewDocumentCommand{\bconverges}{s O{orange} m m}
{%
    \IfBooleanTF#1%
    {\underbrace{#4}_{\textcolor{#2}{\to #3}}}%
    {\overbrace{#4}^{\textcolor{#2}{\to #3}}}%
}%
\DeclareMathOperator{\Fib}{Fib}

% calculus
\newcommand{\diff}{\constfont{d}}
\NewDocumentCommand{\derivative}{O{1} m m}
{%
    \ifthenelse{\equal{#1}{1}}%
    {\frac{\diff #2}{\diff #3}}%
    {\frac{\diff^{#1} #2}{\diff #3^{#1}}}%
}%
\NewDocumentCommand{\partialderivative}{O{1} m m}
{%
    \ifthenelse{\equal{#1}{1}}%
    {\frac{\partial #2}{\partial #3}}%
    {\frac{\partial^{#1} #2}{\partial #3^{#1}}}%
}%
\NewDocumentCommand{\deriv}{O{1} m}
{%
    \ifthenelse{\equal{#1}{1}}%
    {\frac{\diff}{\diff #2}}%
    {\frac{\diff^{#1}}{\diff #2}}%
}%
\NewDocumentCommand{\partialderiv}{O{1} m}
{%
    \ifthenelse{\equal{#1}{1}}%
    {\frac{\partial}{\partial #2}}%
    {\frac{\partial^{#1}}{\partial #2}}%
}%
\newcommand{\lhospitaleq}{\stackrel{\mathclap{\begin{tikzpicture}[baseline=(C.base)]\node[draw, circle, inner sep=0.5pt](C){\scriptsize H};\end{tikzpicture}}}{=}}

% linear algebra
\renewcommand{\vec}{\overrightarrow}
\newcommand{\ihat}{\hat{\imath}}
\newcommand{\jhat}{\hat{\jmath}}
\DeclareMathOperator{\ccw}{ccw}
\let\cross\times

% geometry
\let\len\abs
\newcommand{\mangle}[1]{\len{\angle #1}}
\let\arc\widehat
\let\segment\overline
\DeclareMathOperator{\conv}{conv}
\let\area\brackets

% symbols
\let\Rho\varrho

% proofs
\newenvironment{induction}{\begin{enumerate}[label={\arabic*\degree}]}{\end{enumerate}}
\newenvironment{proofcases}{\begin{enumerate}[label={\arabic*\degree}]}{\end{enumerate}}
\providecommand{\QEDsymbol}{\rule{1.566ex}{1.566ex}}
\providecommand{\QED}{\hfill\QEDsymbol}
\NewDocumentCommand{\canc}{O{black} m}{\renewcommand\CancelColor{\color{#1}}\cancel{#2}}

% physics and measurements
\let\unit\brackets
\let\p\textrm

\newcommand{\yocto}{\constfont{y}}
\newcommand{\zepto}{\constfont{z}}
\newcommand{\atto}{\constfont{a}}
\newcommand{\femto}{\constfont{f}}
\newcommand{\pico}{\constfont{p}}
\newcommand{\nano}{\constfont{n}}
\let\micro\mu
\newcommand{\mili}{\constfont{m}}
\newcommand{\centi}{\constfont{c}}
\newcommand{\deci}{\constfont{d}}
\newcommand{\deca}{\constfont{da}}
\newcommand{\hecto}{\constfont{h}}
\newcommand{\kilo}{\constfont{k}}
\newcommand{\Mega}{\constfont{M}}
\newcommand{\Giga}{\constfont{G}}
\newcommand{\Tera}{\constfont{T}}
\newcommand{\Peta}{\constfont{P}}
\newcommand{\Exa}{\constfont{E}}
\newcommand{\Zetta}{\constfont{Z}}
\newcommand{\Yotta}{\constfont{Y}}

\newcommand{\rad}{\constfont{rad}}
\newcommand{\mol}{\constfont{mol}}

\let\liter\ell
\newcommand{\m}{\constfont{m}}
\newcommand{\dm}{\deci\m}
\newcommand{\cm}{\centi\m}
\newcommand{\mm}{\mili\m}
\newcommand{\km}{\kilo\m}

\newcommand{\g}{\constfont{g}}
\newcommand{\kg}{\kilo\g}
\newcommand{\ton}{\constfont{t}}

\newcommand{\s}{\constfont{s}}
\newcommand{\ms}{\mili\s}
\newcommand{\h}{\constfont{h}}

\newcommand{\Pa}{\constfont{Pa}}
\newcommand{\hPa}{\hecto\Pa}
\newcommand{\MPa}{\mega\Pa}
\newcommand{\kPa}{\kilo\Pa}
\newcommand{\GPa}{\giga\Pa}
\newcommand{\atm}{\constfont{atm}}
\newcommand{\at}{\constfont{at}}
\newcommand{\mmHg}{\constfont{mmHg}}
\newcommand{\Tr}{\constfont{Tr}}

\newcommand{\Farad}{\constfont{F}}
\newcommand{\V}{\constfont{V}}
\newcommand{\C}{\constfont{C}}
\newcommand{\A}{\constfont{A}}
\let\Ohm\Omega
\let\betterrho\varrho
\let\varrho\rho
\let\rho\betterrho

\newcommand{\N}{\constfont{N}}
\newcommand{\Hz}{\constfont{Hz}}
\newcommand{\B}{\constfont{B}}
\newcommand{\dB}{\deci\B}
\newcommand{\K}{\constfont{K}}
\newcommand{\J}{\constfont{J}}
\newcommand{\W}{\constfont{W}}

\newcommand{\zl}{\textrm{z≈Ç}}
