
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{texperimental-drawings}

\RequirePackage{graphicx}
\RequirePackage{float}
\RequirePackage{xcolor}
\RequirePackage{tikz}
\RequirePackage{xfp}
\RequirePackage{xparse}

\usetikzlibrary{angles,quotes,babel,calc}

\definecolor{lightgray}{gray}{0.75}

\NewDocumentCommand{\fillpoint}{O{} m O{} O{above}}%
{%
    \ifthenelse{\equal{#3}{}}%
    {\filldraw[#1] (#2) circle [radius=1pt]}%
    {\filldraw[#1] (#2) circle [radius=1pt] node[#4]{#3}}%
}%

\NewDocumentCommand{\drawpoint}{O{black} O{white} m O{} O{above}}%
{%
    \ifthenelse{\equal{#3}{}}%
    {\filldraw[draw=#1, fill=#2] (#3) circle [radius=1pt]}%
    {\filldraw[draw=#1, fill=#2] (#3) circle [radius=1pt] node[#5]{#4}}%
}%

\NewDocumentCommand{\drawangle}{O{} m O{}}%
{%
    \ifthenelse{\equal{#3}{}}%
    {\pic[draw, #1] {angle=#2}}%
    {\pic[draw, "#3", #1] {angle=#2}}%
}%

\NewDocumentCommand{\drawhmark}{O{black} O{thick} O{0.1cm} m O{} O{at start, left}}%
{%
    \draw[#1, #2] let \p1=(#4) in (\x1-#3, \y1) -- node[#6, inner sep=0, minimum height=0.3cm, fill=white, left=2pt]{#5} (\x1+#3, \y1)%
}%
\NewDocumentCommand{\drawvmark}{O{black} O{thick} O{0.1cm} m O{} O{at start, below}}%
{%
    \draw[#1, #2] let \p1=(#4) in (\x1, \y1-#3) -- node[#6, inner sep=0, minimum size=0.3cm, fill=white, below=2pt]{#5} (\x1, \y1+#3)%
}%
\NewDocumentCommand{\drawaxes}{O{black} O{black} m m O{$x$} O{$y$}}%
{%
    \draw[->, -stealth, thick, #2] let \p1=(#3), \p2=(#4) in (0, \y1) -- node[above left, at end]{#6} (0, \y2);%
    \draw[->, -stealth, thick, #1] let \p1=(#3), \p2=(#4) in (\x1, 0) -- node[below right, at end]{#5} (\x2, 0)%
}%
\NewDocumentCommand{\drawcoordsystem}{O{black} O{lightgray, very thin} m O{1cm} O{1} O{0} m O{$x$} O{$y$}}%
{%
    \coordinate (startcoordinatesystem) at (#3);
    \coordinate (endcoordinatesystem) at (#7);
    \draw[step=#4, #2] (startcoordinatesystem) grid (endcoordinatesystem);%
    \drawaxes[#1][#1]{#3}{#7}[#8][#9];%
    \drawvmark{#4, 0}[#5];%
    \drawhmark{0, #4}[#5];%
    \fillpoint{0, 0};
    \node[below left] at (0, 0) {#6}%
}%

\newenvironment{mathfigure}[1]%
{%
    \def\figurecaption{#1}%
    \begin{figure}[H]%
        \centering%
        \begin{tikzpicture}%
}%
{%
    \end{tikzpicture}%
    \caption{\figurecaption}%
    \end{figure}%
}%

\newenvironment{mathfigure*}%
{%
    \begin{figure}[H]%
        \centering%
        \begin{tikzpicture}%
}%
{%
        \end{tikzpicture}%
    \end{figure}%
}%
